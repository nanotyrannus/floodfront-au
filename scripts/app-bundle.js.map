{"version":3,"sources":["app.ts","environment.ts","main.ts","cookie/cookie-service.ts","login/login.ts","leaflet-map/MarkerModel.ts","leaflet-map/leaflet-map.ts","mode-menu/mode-menu.ts","navigation/navigation-service.ts","place-search/place-search.ts","resources/index.ts","rest/rest-service.ts","user/user-service.ts","leaflet-map/marker-note/marker-note.ts","resources/elements/information.ts"],"names":[],"mappings":"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","file":"app-bundle.js","sourcesContent":["import { Router, RouterConfiguration } from \"aurelia-router\"\ndeclare let window: any\n\nexport class App {\n  private message = `Floodfront ${(new Date()).toISOString()}`\n  private router: Router\n\n  created() {\n    console.log(\"Main component created!\")\n    window.loading_screen.finish()\n  }\n\n  configureRouter(config: RouterConfiguration, router: Router) {\n    this.router = router\n    config.title = \"Floodfront\"\n    config.map([\n      { route: \"\", name: \"home\", moduleId: \"login/login\" },\n      { route: \"mode\", name: \"mode-menu\", moduleId: \"mode-menu/mode-menu\" },\n      { route: \"map\", name: \"map\", moduleId: \"leaflet-map/leaflet-map\" }\n    ])\n    config.mapUnknownRoutes(\"\")\n  }\n}\n","export default {\n  debug: true,\n  testing: true\n};\n","import {Aurelia} from 'aurelia-framework'\nimport environment from './environment';\n\n//Configure Bluebird Promises.\n(<any>Promise).config({\n  warnings: {\n    wForgottenReturn: false\n  }\n});\n\nexport function configure(aurelia: Aurelia) {\n  aurelia.use\n    .standardConfiguration()\n    .feature('resources');\n\n  if (environment.debug) {\n    aurelia.use.developmentLogging();\n  }\n\n  if (environment.testing) {\n    aurelia.use.plugin('aurelia-testing');\n  }\n\n  aurelia.start().then(() => aurelia.setRoot());\n}\n","import * as Cookies from \"js-cookie\"\n\nexport class CookieService {\n\n    get(key: string) {\n        return Cookies.get(key)\n    }\n\n    set(key: string, value: string) {\n        Cookies.set(key, value)\n    }\n\n    delete(key: string) {\n        Cookies.remove(key)\n    }\n}","import { Router } from \"aurelia-router\"\nimport { inject } from \"aurelia-framework\"\nimport { UserService } from \"../user/user-service\"\ndeclare let window: any\n\n@inject(Router, UserService)\nexport class Login {\n\n    private email: string\n\n    constructor(private router: Router, private userService: UserService) {\n        this.email = \"\"\n    }\n\n    public async login(event: Event) {\n\n        if (this.email === \"\") {\n            console.warn(\"Empty email field.\")\n            return\n        }\n        if (event.type === \"click\" || (event as KeyboardEvent).which === 13) {\n            console.log(`email entered: ${this.email}`)\n            window.loading_screen = window.pleaseWait({\n                logo: \"https://placeholdit.imgix.net/~text?txtsize=5&txt=1%C3%971&w=1&h=1&txtpad=1\",\n                backgroundColor: '#2e589b',\n                loadingHtml: \"<div class='loading-message'>Logging in...</div>\"\n            });\n            await this.userService.login(this.email)\n            window.loading_screen.finish()\n            // this.router.navigate(\"map\")\n        }\n        event.preventDefault()\n        // event.stopPropagation()\n    }\n\n    submit() {\n\n    }\n}","export interface MarkerModel {\n    created: Date\n    description: string\n    error_margin: number\n    event_id: number\n    heading: number\n    id: number\n    lat: number\n    lon: number\n    marker_type: MarkerType\n}\n\nexport enum MarkerType {\n    WALKABLE,\n    FLOOD,\n    BORDER\n}","import { Router } from \"aurelia-router\"\nimport { RestService } from \"../rest/rest-service\"\nimport { UserService } from \"../user/user-service\"\nimport { autoinject } from \"aurelia-framework\"\nimport { MarkerModel, MarkerType } from \"./MarkerModel\"\nimport { Marker } from \"leaflet\"\nimport { MarkerNoteCustomElement } from \"./marker-note/marker-note\"\nimport { NavigationService } from \"../navigation/navigation-service\"\nimport { EventAggregator } from \"aurelia-event-aggregator\"\nimport { PlaceSearch } from \"../place-search/place-search\"\nimport { InformationCustomElement } from \"../resources/elements/information\"\nimport { child } from \"aurelia-framework\"\n\n@autoinject\nexport class LeafletMap {\n    private leafletMap: L.Map\n    private primed: boolean = false\n    private selectedMarker: Marker\n    private markerType: MarkerType\n    private markers: Marker[]\n    private markersModels: MarkerModel[]\n    private files: Map<any, File> = new Map<any, File>()\n    private placeQuery: string\n    private searchText = \"Search text\"\n    @child('information') private info: InformationCustomElement\n\n    constructor(\n        private router: Router,\n        private rest: RestService,\n        private userService: UserService,\n        private markerNote: MarkerNoteCustomElement,\n        // private info: InformationCustomElement,\n        private eventAggregator: EventAggregator,\n        private nav: NavigationService,\n        private search: PlaceSearch) {\n\n        this.eventAggregator.subscribe(\"marker-note\", data => {\n            console.log(data)\n            this.markersModels.forEach(markerModel => {\n                if (markerModel.id === data.id) {\n                    //TODO update descriptions client-side\n                }\n            })\n        })\n\n        this.getMarkers()\n    }\n\n    attached() {\n        if (!this.userService.email) {\n            this.router.navigate(\"\")\n            return\n        }\n\n        window['leafletComponent'] = {\n            \"upload\": (id) => this.upload(id),\n            \"openNote\": () => {\n                this.markerNote.open((this.selectedMarker as DataMarker).id)\n            },\n            \"closeNote\": () => {\n                this.markerNote.close()\n            },\n            \"readUrl\": (val, id) => this.readUrl(val, id),\n            \"deleteMarker\": () => {\n                this.deleteMarker(this.selectedMarker)\n            }\n        }\n\n        this.leafletMap = L.map(\"map\", {\n            \"zoom\": 18,\n            \"center\": [0, 0],\n            \"doubleClickZoom\": false\n        })\n\n        var matthewTiles = [\"https://geodesy.noaa.gov/storm_archive/storms/tilesb/services/tileserver.php/20161007aOblique/{z}/{x}/{y}.png\"\n            , \"https://geodesy.noaa.gov/storm_archive/storms/tilesb/services/tileserver.php/20161008aOblique/{z}/{x}/{y}.png\"\n            , \"https://geodesy.noaa.gov/storm_archive/storms/tilesb/services/tileserver.php/20161008bOblique/{z}/{x}/{y}.png\"\n            , \"https://geodesy.noaa.gov/storm_archive/storms/tilesb/services/tileserver.php/20161009aOblique/{z}/{x}/{y}.png\"\n            , \"https://geodesy.noaa.gov/storm_archive/storms/tilesb/services/tileserver.php/20161010aOblique/{z}/{x}/{y}.png\"\n            , \"https://geodesy.noaa.gov/storm_archive/storms/tilesb/services/tileserver.php/20161011_RGB/{z}/{x}/{y}.png\"\n            , \"https://geodesy.noaa.gov/storm_archive/storms/tilesb/services/tileserver.php/20161013_RGB/{z}/{x}/{y}.png\"\n            , \"https://geodesy.noaa.gov/storm_archive/storms/tilesb/services/tileserver.php/20161014_RGB/{z}/{x}/{y}.png\"\n            , \"https://geodesy.noaa.gov/storm_archive/storms/tilesb/services/tileserver.php/20161015_RGB/{z}/{x}/{y}.png\"\n            , \"https://geodesy.noaa.gov/storm_archive/storms/tilesb/services/tileserver.php/20161016_RGB/{z}/{x}/{y}.png\"]\n        let matthewOptions = { tileSize: 256, minZoom: 1, maxZoom: 19, type: 'xyz' }\n\n        let matthewLayer = L.layerGroup(\n            matthewTiles.map(tileString => {\n                return L.tileLayer(tileString, matthewOptions)\n            })\n        ).eachLayer(layer => {\n            (layer as any).bringToFront()\n        })\n\n        // L.control.layers(null, { \"Matthew\": matthewLayer }).addTo(this.leafletMap)\n        let simpleLayer = L.tileLayer('https://api.mapbox.com/styles/v1/nanotyrannus/cj0kywrdm001n2smyhddxb7wb/tiles/256/{z}/{x}/{y}@2x?access_token={accessToken}', {\n            // attribution: 'Map data &copy; OpenStreetMap contributors, <a href=\"http://creativecommons.org/licenses/by-sa/2.0/\">CC-BY-SA</a>, Imagery © <a href=\"http://mapbox.com\">Mapbox</a>',\n            maxZoom: 19,\n            id: 'your.mapbox.project.id',\n            accessToken: 'pk.eyJ1IjoibmFub3R5cmFubnVzIiwiYSI6ImNpcnJtMmNubDBpZTN0N25rZmMxaHg4ZHQifQ.vj7pif8Z4BVhbYs55s1tAw'\n        })\n\n        let satelliteLayer = L.tileLayer('https://api.mapbox.com/styles/v1/nanotyrannus/ciye7ibx9000l2sk6v4n5bx3n/tiles/256/{z}/{x}/{y}@2x?access_token={accessToken}', {\n            // attribution: 'Map data &copy; OpenStreetMap contributors, <a href=\"http://creativecommons.org/licenses/by-sa/2.0/\">CC-BY-SA</a>, Imagery © <a href=\"http://mapbox.com\">Mapbox</a>',\n            maxZoom: 19,\n            id: 'your.mapbox.project.id',\n            accessToken: 'pk.eyJ1IjoibmFub3R5cmFubnVzIiwiYSI6ImNpcnJtMmNubDBpZTN0N25rZmMxaHg4ZHQifQ.vj7pif8Z4BVhbYs55s1tAw'\n        })\n\n        let baseMaps = {\n            \"Simple\": simpleLayer,\n            \"Satellite\": satelliteLayer\n        }\n\n        let overlayMaps = {\n            \"Matthew\": matthewLayer\n        }\n        if (this.userService.mode === \"desktop\") {\n            simpleLayer.addTo(this.leafletMap)\n            matthewLayer.addTo(this.leafletMap)\n        } else {\n            satelliteLayer.addTo(this.leafletMap)\n        }\n\n        L.control.layers(baseMaps, overlayMaps).addTo(this.leafletMap)\n\n        // this.initiateNavigation\n\n        this.leafletMap.on(\"dragstart\", event => {\n            // this.popup.hide()\n            // this.popup.isVisible = false\n            console.log(\"dragstart\")\n        })\n\n        this.leafletMap.on('click', (event: any) => {\n\n            if (this.primed) {\n                this.primed = false\n            } else {\n                return\n            }\n\n            this.spawnMarker(event.latlng)\n\n            console.log(`placed marker at ${event.latlng.lat}, ${event.latlng.lng}`)\n\n            // marker.addTo(this.leafletMap)\n        })\n\n        this.centerMap()\n    }\n\n    private spawnMarker(latlng: any, type: MarkerType = null, oldMarker: any = null) {\n        console.log(`spawnMarker called with ${latlng}`)\n        let marker: any = L.marker(latlng, { \"draggable\": true })\n\n        var delay = 250\n        marker.clickCount = 0\n        marker.on('click', event => {\n            console.log(marker.id)\n            // Implement double click\n            this.selectedMarker = marker\n            marker.clickCount += 1\n            if (marker.clickCount === 2) {\n                console.log(\"Double click detected.\")\n            }\n            setTimeout(() => {\n                if (marker.clickCount === 1) {\n                    console.log(\"Single click detected\")\n                }\n                marker.clickCount = 0\n            }, delay)\n\n            setTimeout(() => {\n                // Wait one tick for popup to render\n                $(\":file\").filestyle({\n                    iconName: \"glyphicon glyphicon-camera\",\n                    input: false,\n                    buttonText: \"Photo\"\n                })\n                $(\"div.bootstrap-filestyle.input-group\").css(\"width\", \"100%\")\n                $(\"label.btn.btn-default\").css(\"width\", \"100%\")\n            }, 0)\n        })\n        marker.on(\"contextmenu\", event => {\n            console.log(`contextmenu event from ${marker.id}`, event)\n            this.selectedMarker = marker\n            event.originalEvent.preventDefault()\n            this.deleteMarker(marker)\n\n            // this.selectedMarker = marker\n            // this.popup.setMarker(this.selectedMarker)\n            // this.sliderDisplay = \"block\"\n            // this.x = (event.originalEvent.clientX - this.sliderRadius - 20)\n            // this.y = (event.originalEvent.clientY - this.sliderRadius - 20)\n            // this.zone.run(() => {\n            //   this.popup.setCoords(event.originalEvent.clientX, event.originalEvent.clientY)\n            //   this.popup.show()\n            // })\n\n            // return false\n        })\n\n        if (oldMarker) { // Markers from server are not typed\n            marker.id = oldMarker.id\n            // if (oldMarker.heading !== null) {\n            //   marker.type = MarkerType.DIRECTIONAL\n            //   marker.setIcon(\n            //     L.icon({\n            //       \"iconUrl\": \"assets/images/arrow.svg\",\n            //       \"iconSize\": [40, 40]\n            //     })\n            //   )\n            //   marker.heading = oldMarker.heading\n            //   marker.setRotationAngle(marker.heading)\n            // } else {\n            //   marker.type = MarkerType.DEFAULT\n            // }\n            console.log(`Marker of id ${oldMarker.id} retrieved of type ${oldMarker.marker_type}`)\n        } else {\n            // Newly created marker\n            marker.marker_type = MarkerType[this.markerType]\n            // if (marker.marker_type === MarkerType.DIRECTIONAL) {\n            //     marker.heading = 0\n            //     marker.setIcon(\n            //         L.icon({\n            //             \"iconUrl\": \"assets/images/arrow.svg\",\n            //             \"iconSize\": [40, 40]\n            //         })\n            //     )\n            //     // After rotation plugin install, set rotation here\n            // }\n            // marker.idSubject = new ReplaySubject(1)\n            // marker.idSubject.subscribe(id => {\n            //     marker.id = id\n            //     this.bindPopup(marker)\n            // })\n            this.createMarker(latlng.lat, latlng.lng, marker, marker.marker_type)\n        }\n\n        let referenceMarker = (oldMarker) ? oldMarker : marker\n\n        if (referenceMarker.marker_type === MarkerType[MarkerType.WALKABLE]) {\n            marker.setIcon(\n                L.icon({\n                    \"iconUrl\": \"assets/images/marker_walkable.svg\",\n                    \"iconSize\": [25, 25]\n                })\n            )\n        } else if (referenceMarker.marker_type === MarkerType[MarkerType.BORDER]) {\n            marker.setIcon(\n                L.icon({\n                    \"iconUrl\": \"assets/images/marker_border.svg\",\n                    \"iconSize\": [25, 25]\n                })\n            )\n        } else if (referenceMarker.marker_type === MarkerType[MarkerType.FLOOD]) {\n            marker.setIcon(\n                L.icon({\n                    \"iconUrl\": \"assets/images/marker_flood.svg\",\n                    \"iconSize\": [25, 25]\n                })\n            )\n        } else {\n            console.warn(`Marker type: ${referenceMarker.marker_type}`)\n        }\n\n        marker.on('dragend', e => {\n            this.updateMarker(marker.id, e.target._latlng)\n        })\n\n        this.bindPopup(marker)\n        marker.addTo(this.leafletMap)\n    }\n\n    goBack() {\n        this.router.navigate(\"mode\")\n    }\n\n    private async getMarkers() {\n        // Must remove magic number '2'\n        let data = await this.rest.postWithRetry(\"marker/2/retrieve\", { \"email\": this.userService.email })\n        console.log(\"Markers!\", data)\n        data.markers.forEach((marker: MarkerModel) => {\n            this.spawnMarker([marker.lat, marker.lon], marker.marker_type, marker)\n        })\n    }\n\n    private primeMarker(type: string) {\n        this.markerType = MarkerType[type]\n        this.primed = true\n    }\n\n    private markerPlaced() {\n        this.markerType = null\n        this.primed = false\n    }\n\n    public async createMarker(lat: number, lon: number, marker: any = null, type: MarkerType = null) {\n        let payload = {\n            \"type\": type, //ignored on backend TODO: implementing type on backend\n            \"lat\": lat,\n            \"lon\": lon,\n            \"heading\": (marker.heading != null) ? marker.heading : null,\n            \"accuracy\": this.nav.currentPosition.accuracy || -1,\n            \"email\": this.userService.email\n        }\n        console.log(\"createMarker payload\", payload)\n        let response = await this.rest.postWithRetry(`marker/2`, payload)\n        // let data = response.content\n        console.log(\"leaflet-map#createMarker\", response)\n        marker.id = response.id\n    }\n\n    public bindPopup(marker: any, type: MarkerType = MarkerType.WALKABLE) {\n        console.log(`leafletMap#bindPopup: ${marker.id}`)\n        marker.unbindPopup()\n        let id = marker.id\n        let markup = `\n        <img id=\"thumbnail-${marker.id}\" class=\"thumbnail map-thumbnail\" src=\"/uploads/${marker.id}.jpg\">\n        <form enctype=\"multipart/form-data\" action=\"https://localhost:8080/upload\" method=\"POST\">\n        <input style=\"display: inline;\" class=\"filestyle\" data-iconName=\"glyphicon glyphicon-camera\" type=\"file\" name=\"picture\" accept=\"image/*\" onchange=\"window.leafletComponent.readUrl(this, ${marker.id})\">\n        </form>\n        <button class=\"btn btn-default context-btn\" onclick=\"window.leafletComponent.openNote()\">Note</button>\n        <button class=\"btn btn-default context-btn\" onclick=\"window.leafletComponent.deleteMarker()\">Delete</button>\n        <!-- <button class=\"btn btn-default\" onclick=\"window.leafletComponent.upload(${marker.id})\">UPLOAD</button> -->\n    `\n        // if (marker.type === MarkerType.DIRECTIONAL) {\n        //   markup += `<div>I'M DIRECTIONAL</div>`\n        // }\n        marker.bindPopup(markup, { \"autoPan\": false })\n    }\n\n    public updateMarker(id: number, latlng: any, heading: number = null) {\n        console.log(`updateMarker called with ${id} ${heading}`, latlng)\n        this.rest.postWithRetry(`/marker/${id}/update`, {\n            \"lat\": latlng.lat,\n            \"lon\": latlng.lng,\n            \"heading\": heading\n        })\n    }\n\n    private async deleteMarker(marker: Marker) {\n        let res = window.confirm(\"Delete marker?\")\n        if (res) {\n            this.leafletMap.removeLayer(marker)\n            this.rest.postWithRetry(`marker/${(marker as DataMarker).id}/delete`, {})\n        }\n    }\n\n    public readUrl(value: any, markerId: number) {\n        console.log(value)\n        var elm = document.getElementById(`thumbnail-${markerId}`)\n        var reader = new FileReader() //\n        reader.onload = e => {\n            elm['src'] = e.target['result']\n        }\n        reader.readAsDataURL(value.files[0])\n        this.files.set(markerId, value.files[0])\n        this.upload(markerId)\n    }\n\n    private upload(markerId: number) {\n        let formData = new FormData()\n        formData.append(\"image\", this.files.get(markerId))\n        formData.append(\"marker_id\", markerId)\n        let xhr = new XMLHttpRequest()\n        xhr.open(\"POST\", `${\"https:\"}//${\"floodfront.net\"}:8080/upload`)\n        xhr.send(formData)\n        xhr.addEventListener(\"loadend\", () => {\n            this.selectedMarker.closePopup()\n        })\n    }\n\n    private toggleInfo() {\n        this.info.toggle()\n        // this.eventAggregator.publish(\"toggle-info\", true)\n    }\n\n    /**\n     * Centers map on user location using GPS Navigation.\n     */\n    private async centerMap() {\n        // TODO r\n        try {\n            let pos: any = await this.nav.getCurrentPosition()\n            console.log(pos)\n            this.leafletMap.setView([pos.coords.latitude, pos.coords.longitude], 18)\n        } catch (e) {\n            console.log(\"centerMap something went wrong\")\n        }\n    }\n\n    private async query(event: KeyboardEvent) {\n        // For now, navigate to first result.\n        if (event.which === 13) {\n            let result = await this.search.search(this.placeQuery)\n            this.placeQuery = \"\"\n            this.leafletMap.setView(result[0].latLng, 15)\n        }\n    }\n\n}\n\nclass DataMarker extends Marker {\n    public clickCount: number\n    public id: number\n}","import { UserService } from \"../user/user-service\"\nimport { Router } from \"aurelia-router\"\nimport { autoinject } from \"aurelia-framework\"\n\n@autoinject()\nexport class ModeMenu {    \n    private email: string\n\n    constructor(private userService: UserService, private router: Router) {\n    }\n\n    created() {\n        this.email = this.userService.email\n    }\n\n    private enterMap(mode: string) {\n        this.userService.mode = mode\n        this.router.navigate(\"map\")\n    }\n\n    private logout() {\n        this.userService.logout()\n    }\n}","export class NavigationService {\n\n    private watchId: number\n    public currentPosition = {\n        accuracy: -1,\n        lat: -1,\n        lon: -1\n    }\n\n    public initialize() {\n\n        this.watchId = window.navigator.geolocation.watchPosition(pos => {\n            this.currentPosition = {\n                lat: pos.coords.latitude,\n                lon: pos.coords.longitude,\n                accuracy: pos.coords.accuracy\n            }\n        })\n\n    }\n\n    public getCurrentPosition() {\n        let options = {\n            \"enableHighAccuracy\": true\n        }\n        \n        return new Promise(function (resolve, reject) {\n            window.navigator.geolocation.getCurrentPosition(resolve, reject, options)\n        })\n    }\n}","import { HttpClient } from \"aurelia-http-client\"\nimport { autoinject } from \"aurelia-framework\"\n\n@autoinject\nexport class PlaceSearch {\n\n    \n\n    // TODO change PlaceSearch to be server-sided. Must protect API key.\n    private baseUrl = \"https://www.mapquestapi.com/geocoding/v1/address?key=Z8jOSw6nAVGVOhHv6A4TYlQ1ldWVlNuX&maxResults=10\"\n\n    constructor(private http: HttpClient) {\n\n    }\n\n    public async search(place: string) {\n        let result = await this.http.get(`${this.baseUrl}&location=${place}`)\n        let response = JSON.parse(result.response)\n        let locations = response.results[0].locations\n        return locations\n    }\n}\n\n","import {FrameworkConfiguration} from 'aurelia-framework';\n\nexport function configure(config: FrameworkConfiguration) {\n  //config.globalResources([]);\n}\n","import { HttpClient } from \"aurelia-http-client\"\n\nexport class RestService {\n    private _client = new HttpClient().configure(x => {\n        x.withBaseUrl(\"https://floodfront.net:8080\")\n    })\n    private baseUrl = `${\"https\"}//${\"floodfront.net\"}:${8080}`\n    private inProgress = new Map()\n\n    constructor() { }\n\n    public async postWithRetry(endpoint: string, body: any) {\n        let response = null\n        let data = null\n        // try {\n        response = await this._client.post(`${endpoint}`, body)\n        data = response.content\n        // } catch (e) {\n        //     console.warn(\"Failed to post!\")\n        // }\n\n        // console.log(\"Server response\", response)\n        return data\n    }\n\n    public async getWithRetry(endpoint: string) {\n        let response = null\n        let data = null\n        // try {\n        response = await this._client.get(`${this.baseUrl}/${endpoint}`)\n        data = response.content\n        // } catch (e) {\n        //     console.warn(\"Failed to get!\")\n        // }\n\n        console.log(\"Server response\", response)\n        return data\n    }\n}","import { CookieService } from \"../cookie/cookie-service\"\nimport { RestService } from \"../rest/rest-service\"\nimport { Router } from \"aurelia-router\"\nimport { inject, autoinject } from \"aurelia-framework\"\n\n@autoinject()\nexport class UserService {\n\n    private _email: string\n    private _mode: string\n\n    constructor(private cookies: CookieService, public router: Router, public rest: RestService) {\n        console.log(`UserService constructed!`)\n        if (this.cookies.get(\"email\")) {\n            this._email = this.cookies.get(\"email\")\n        }\n    }\n\n    public async login(email: string) {\n        let response = await this.rest.postWithRetry(\"login\", { \"email\": email })\n        let data = response.content\n        this.router.navigate(\"mode\")\n        this._email = email\n        this.cookies.set(\"email\", email)\n        return data\n    }\n\n    public logout() {\n        this.cookies.delete(\"email\")\n        this.router.navigate(\"\")\n    }\n\n    get email(): string {\n        return this._email\n    }\n\n    get mode(): string {\n        return this._mode\n    }\n\n    set mode(val: string) {\n        this._mode = val\n    }\n}","import { EventAggregator } from \"aurelia-event-aggregator\"\nimport { RestService } from \"../../rest/rest-service\"\nimport { autoinject } from \"aurelia-framework\"\n\n@autoinject\nexport class MarkerNoteCustomElement {\n\n    private id: number\n    private message = \"marker-note.ts\"\n    private description = null\n    private visible = false\n\n    constructor(private eventAggregator: EventAggregator, private rest: RestService) { }\n\n    /**\n     * NOTE: Using jquery workaround. Aurelia does not seem\n     * to support dynamic CSS binding. Update later if false.\n     * @param id ID of marker.\n     */\n    public open(id: number, desc?: string) {\n        this.id = id\n        // Workaround using global window. id becomes \"null\" for some reason.\n        window[\"markerNote\"] = { id: id }\n        console.log(`markerNote#open: ${this.id}`)\n        this.description = desc\n        this.visible = !this.visible\n        $(\".marker-note-container\").css(\"display\", \"block\")\n    }\n    public close() {\n        console.log(`markerNote#close`)\n        this.visible = !this.visible\n        $(\".marker-note-container\").css(\"display\", \"none\")\n    }\n\n    public async submit() {\n        // console.log(`marker-note: ${this.description}, ${this.id}`)\n        await this.rest.postWithRetry(`marker/${window[\"markerNote\"].id}/description`, {\n            \"description\" : this.description\n        })\n        this.eventAggregator.publish(\"marker-note\", {\n            \"description\": this.description,\n            \"id\": window[\"markerNote\"].id\n        })\n        this.close()\n    }\n}","import { bindable, bindingMode, autoinject } from \"aurelia-framework\"\nimport { EventAggregator } from \"aurelia-event-aggregator\"\n\n@autoinject()\nexport class InformationCustomElement {\n    private name = \"Information\"\n    @bindable({ defaultBindingMode: bindingMode.twoWay }) private myStyle = \"visibility : visible;\"\n    private isVisible = true\n\n    constructor(private ea: EventAggregator) {\n        this.ea.subscribe(\"toggle-info\", () => {\n            this.toggle()\n        })\n    }\n\n    public toggle() {\n        console.log(\"information#toggle called\", this.myStyle)\n        this.isVisible = !this.isVisible\n        if (this.isVisible) {\n            // this.style.visibility = \"visible\"\n            // $(\".marker-menu-container\").css(\"visibility\", \"visible\")\n            this.myStyle = \"visibility : visible;\"\n        } else {\n            // this.style.visibility = \"hidden\"\n            // $(\".marker-menu-container\").css(\"visibility\", \"hidden\")\n            this.myStyle = \"visibility : hidden;\"\n        }\n    }\n}"],"sourceRoot":".."}